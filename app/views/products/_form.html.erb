<div class="custom-border">
  <%= form_with model: @product do |form| %>

    <div class="mb-3">
      <%= form.label :title, class: "form-label" %>
      <%= form.text_field :title, class: "form-control" %>
      <%= render partial: 'errors', locals: { field_name: :title } %>
    </div>

    <div class="mb-3">
      <%= form.label :description, class: "form-label" %>
      <%= form.text_area :description, class: "form-control", rows: 3 %>
      <%= render partial: 'errors', locals: { field_name: :description } %>
    </div>

    <div class="row mb-3">
      <div class="col">
        <%= form.label :product_stock_quantity, class: "form-label" %>
        <%= form.number_field :product_stock_quantity, class: "form-control" %>
        <%= render partial: 'errors', locals: { field_name: :product_stock_quantity } %>
      </div>
      <div class="col">
        <%= form.label :price, class: "form-label" %>
        <%= form.number_field :price, class: "form-control" %>
        <%= render partial: 'errors', locals: { field_name: :price } %>
      </div>
    </div>

    <div data-controller="previews">
      <%= form.label :add_image, class: "form-label" %>
      <%= form.file_field :image,
        direct_upload: true,
        data: { previews_target: "input", action: "change->previews#preview" } %>

      <% if product.image.attached? %>
        <%= image_tag product.image, data: { previews_target: "preview" }, style: "width: 100px; height: auto;" %>
      <% else %>
        <%= image_tag "", data: { previews_target: "preview" }, style: "width: 100px; height: auto;" %>
      <% end %>

      <%= render partial: 'errors', locals: { field_name: :image } %>
    </div>

    <div class="d-grid gap-2 col-2 mx-auto">
      <%= form.submit class: "btn btn-primary btn-lg" %>
    </div>
  <% end %>
</div>
